"use strict";(self.webpackChunkglowworm=self.webpackChunkglowworm||[]).push([[8573],{72414:function(e,n,t){t.d(n,{Z:function(){return h}});var i=t(44367),r=t(29547),s=t(3469),o=t(37172),a=t(59061),c=t(26573),l=t(48943),d=t(58847),u=["links","action","heading","moreLink","sx"];function h(e){var n=e.links,t=e.action,h=e.heading,x=e.moreLink,p=void 0===x?[]:x,Z=e.sx,m=(0,r.Z)(e,u);return(0,d.jsxs)(s.Z,{sx:(0,i.Z)({mb:5},Z),children:[(0,d.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(s.Z,{sx:{flexGrow:1},children:[(0,d.jsx)(o.Z,{variant:"h4",gutterBottom:!0,children:h}),(0,d.jsx)(l.SW,(0,i.Z)({links:n},m))]}),t&&(0,d.jsx)(s.Z,{sx:{flexShrink:0},children:t})]}),(0,d.jsx)(s.Z,{sx:{mt:2},children:(0,c.isString)(p)?(0,d.jsx)(a.Z,{href:p,target:"_blank",variant:"body2",children:p}):p.map((function(e){return(0,d.jsx)(a.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",sx:{display:"table"},children:e},e)}))})]})}},50329:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(29547),r=t(44367),s=t(37172),o=t(28586),a=t(41645),c=t(58974),l=t(53525),d=t(67951),u=t(58847),h=["images","photoIndex","setPhotoIndex","isOpen","onClose"],x=(0,a.Z)((function(e){var n="rtl"===e.direction,t=function(n){return{backgroundSize:"24px 24px",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:(0,o.Fq)(e.palette.grey[900],.8),backgroundImage:'url("/static/icons/controls/'.concat(n,'.svg")')}};return(0,c.Z)({root:{backdropFilter:"blur(8px)",backgroundColor:(0,o.Fq)(e.palette.grey[900],.88),"& .ril__toolbar":{height:"auto !important",padding:e.spacing(2,3),backgroundColor:"transparent"},"& .ril__toolbarLeftSide":{display:"none"},"& .ril__toolbarRightSide":{height:"auto !important",padding:0,flexGrow:1,display:"flex",alignItems:"center","& li":{display:"flex",alignItems:"center"},"& li:first-of-type":{flexGrow:1},"& li:not(:first-of-type)":{width:e.spacing(5),height:e.spacing(5),justifyContent:"center",marginLeft:e.spacing(1),borderRadius:e.shape.borderRadius}},"& button:focus":{outline:"none"},"& .ril__toolbarRightSide button":{width:"100%",height:"100%","&.ril__zoomInButton":t("maximize-outline"),"&.ril__zoomOutButton":t("minimize-outline"),"&.ril__closeButton":t("close")},"& .ril__navButtons":{padding:e.spacing(3),borderRadius:e.shape.borderRadiusSm,"&.ril__navButtonPrev":(0,r.Z)({left:e.spacing(2),right:"auto"},t(n?"arrow-ios-forward":"arrow-ios-back")),"&.ril__navButtonNext":(0,r.Z)({right:e.spacing(2),left:"auto"},t(n?"arrow-ios-back":"arrow-ios-forward"))}}})}));function p(e){var n=e.images,t=e.photoIndex,o=e.setPhotoIndex,a=e.isOpen,c=e.onClose,p=(0,i.Z)(e,h),Z=x();(0,l.useEffect)((function(){document.body.style.overflow=a?"hidden":"unset"}),[a]);var m=[(0,u.jsx)(s.Z,{variant:"subtitle2",children:"".concat(t+1," / ").concat(n.length)})];return(0,u.jsx)(u.Fragment,{children:a&&(0,u.jsx)(d.Z,(0,r.Z)({mainSrc:n[t],nextSrc:n[(t+1)%n.length],prevSrc:n[(t+n.length-1)%n.length],onCloseRequest:c,onMovePrevRequest:function(){return o((t+n.length-1)%n.length)},onMoveNextRequest:function(){return o((t+1)%n.length)},toolbarButtons:m,reactModalStyle:{overlay:{zIndex:9999}},wrapperClassName:Z.root},p))})}},88573:function(e,n,t){t.r(n),t.d(n,{default:function(){return Re}});var i=t(23080),r=t(44367),s=t(34451),o=t(87408),a=t(75285),c=t(89227),l=t(33469),d=t(46055),u=t(53525),h=t(13688),x=t(72414),p=t(75641),Z=t(19363),m=t(25171),f=t(45008),g=t(33543),j=t(36834),v=t(82173),w=t(23151),b=t(79507),y=t(7233),k=t(84422),C=t(91985),I=t(90138),S=t(70744),O=t(21902),D=t(66585),P=t(98132),R=t(46281),z=t(3469),T=t(37172),_=t(48943),J=t(33833),M=t(58847);function F(e){var n=e.columnName,t=e.onDelete,i=e.onUpdate,r=(0,u.useRef)(null),s=(0,u.useRef)(null),o=(0,u.useState)(!1),a=(0,w.Z)(o,2),c=a[0],d=a[1],h=(0,u.useState)(n),x=(0,w.Z)(h,2),p=x[0],Z=x[1];(0,u.useEffect)((function(){c&&null!==s&&s.current.focus()}),[c]);var m=function(){d(!1)};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,sx:{pt:3},children:[(0,M.jsx)(P.Z,{inputRef:s,size:"small",placeholder:"\u8282\u70b9\u540d\u79f0",value:p,onChange:function(e){Z(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(s.current.blur(),i(e.target.value))},sx:{typography:"h6",fontWeight:"fontWeightBold","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}}}),(0,M.jsx)(_.V3,{ref:r,size:"small",onClick:function(){d(!0)},color:c?"inherit":"default",children:(0,M.jsx)(y.JO,{icon:O.Z,width:20,height:20})})]}),(0,M.jsxs)(J.Z,{open:c,onClose:m,anchorEl:r.current,sx:{py:1,width:"auto"},children:[(0,M.jsxs)(R.Z,{onClick:function(){m()},sx:{py:.75,px:1.5},children:[(0,M.jsx)(z.Z,{component:y.JO,icon:S.Z,sx:{width:20,height:20,flexShrink:0,mr:1}}),(0,M.jsx)(T.Z,{variant:"body2",children:"\u91cd\u547d\u540d\u8282\u70b9"})]}),(0,M.jsxs)(R.Z,{onClick:t,sx:{py:.75,px:1.5},children:[(0,M.jsx)(z.Z,{component:y.JO,icon:D.Z,sx:{width:20,height:20,flexShrink:0,mr:1}}),(0,M.jsx)(T.Z,{variant:"body2",children:"\u5220\u9664\u8282\u70b9"})]})]})]})}var W=t(10886),A=t(4157),V=t(29992),B=t(59675),q=t(1940),U=t(31637),E=t(53394),G=t(48053),L=t(10711),N=t(67930),K=t(5893),H=t(26573),Y=t(89488),$={attachments:[],comments:[],description:"",due:[null,null],assignee:[]};function Q(e){var n=e.date,t=(0,u.useState)([n[0],n[1]]),i=(0,w.Z)(t,2),r=i[0],s=i[1],o=(0,u.useState)(!1),a=(0,w.Z)(o,2),c=a[0],l=a[1],d=r[0],h=r[1];return{dueDate:r,startTime:d,endTime:h,isSameDays:(0,L.Z)(new Date(d),new Date(h)),isSameMonths:(0,N.Z)(new Date(d),new Date(h)),onChangeDueDate:function(e){s(e)},openPicker:c,onOpenPicker:function(){l(!0)},onClosePicker:function(){l(!1)}}}function X(e){var n=e.startTime,t=e.endTime,i=e.isSameDays,s=e.isSameMonths,o=e.onOpenPicker,a=e.sx,c={typography:"caption",cursor:"pointer","&:hover":{opacity:.72}};return s?(0,M.jsx)(z.Z,{onClick:o,sx:(0,r.Z)((0,r.Z)({},c),a),children:i?(0,K.Z)(new Date(t),"dd MMM"):"".concat((0,K.Z)(new Date(n),"dd")," - ").concat((0,K.Z)(new Date(t),"dd MMM"))}):(0,M.jsxs)(z.Z,{onClick:o,sx:(0,r.Z)((0,r.Z)({},c),a),children:[(0,K.Z)(new Date(n),"dd MMM")," - ",(0,K.Z)(new Date(t),"dd MMM")]})}function ee(e){var n=e.onAddTask,t=e.onCloseAddTask,i=(0,u.useState)(""),s=(0,w.Z)(i,2),o=s[0],a=s[1],c=(0,u.useState)(!1),d=(0,w.Z)(c,2),h=d[0],x=d[1],p=Q({date:[null,null]}),Z=p.dueDate,m=p.startTime,f=p.endTime,g=p.isSameDays,j=p.isSameMonths,v=p.onChangeDueDate,b=p.openPicker,C=p.onOpenPicker,I=p.onClosePicker;return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(U.Z,{onClickAway:function(){o&&n((0,r.Z)((0,r.Z)({},$),{},{id:(0,Y.Z)(),name:o,due:Z,completed:h})),t()},children:(0,M.jsxs)(k.Z,{variant:"outlined",sx:{p:2},children:[(0,M.jsx)(P.Z,{multiline:!0,size:"small",placeholder:"\u4efb\u52a1\u540d\u79f0",value:o,onChange:function(e){return a(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&""!==(0,H.trim)(o)&&n((0,r.Z)((0,r.Z)({},$),{},{id:(0,Y.Z)(),name:o,due:Z,completed:h}))},sx:{"& input":{p:0},"& fieldset":{borderColor:"transparent !important"}}}),(0,M.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",children:[(0,M.jsx)(E.Z,{title:"\u6807\u8bb0\u4efb\u52a1\u5b8c\u6210",children:(0,M.jsx)(G.Z,{disableRipple:!0,checked:h,onChange:function(e){x(e.target.checked)},icon:(0,M.jsx)(y.JO,{icon:B.Z}),checkedIcon:(0,M.jsx)(y.JO,{icon:A.Z})})}),(0,M.jsxs)(l.Z,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,M.jsx)(E.Z,{title:"\u5206\u914d\u6b64\u4efb\u52a1",children:(0,M.jsx)(_.V3,{size:"small",children:(0,M.jsx)(y.JO,{icon:V.Z,width:20,height:20})})}),m&&f?(0,M.jsx)(X,{startTime:m,endTime:f,isSameDays:g,isSameMonths:j,onOpenPicker:C}):(0,M.jsx)(E.Z,{title:"\u6dfb\u52a0\u5230\u671f\u65e5",children:(0,M.jsx)(_.V3,{size:"small",onClick:C,children:(0,M.jsx)(y.JO,{icon:W.Z,width:20,height:20})})}),(0,M.jsx)(q.Z,{open:b,onClose:I,onOpen:C,value:Z,onChange:v,renderInput:function(){}})]})]})]})})})}var ne=t(78833),te=t(26680),ie=t(46596),re=t(49552),se=t(25892),oe=t(4059),ae=t(73818),ce=t(14682),le=t(24960),de=t(90778),ue=t(77597),he=t(28586),xe=t(44715),pe=t(46038),Ze=t(50329),me=(0,le.ZP)("div")((function(e){var n=e.theme;return{width:64,height:64,fontSize:24,display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",margin:n.spacing(.5),borderRadius:n.shape.borderRadius,border:"dashed 1px ".concat(n.palette.divider),"&:hover":{opacity:.72}}}));function fe(){var e=(0,u.useState)([]),n=(0,w.Z)(e,2),t=n[0],i=n[1],s=(0,u.useCallback)((function(e){i(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[i]),o=(0,xe.uI)({onDrop:s}),a=o.getRootProps,c=o.getInputProps,l=o.isDragActive;return(0,M.jsxs)(M.Fragment,{children:[t.map((function(e){var n=e.name,s=e.preview,o=(0,H.isString)(e)?e:n;return(0,M.jsxs)(z.Z,(0,r.Z)((0,r.Z)({},pe.u$),{},{sx:{p:0,m:.5,width:64,height:64,borderRadius:1,overflow:"hidden",position:"relative"},children:[(0,M.jsx)(k.Z,{variant:"outlined",component:"img",src:(0,H.isString)(e)?e:s,sx:{width:"100%",height:"100%",objectFit:"cover",position:"absolute"}}),(0,M.jsx)(z.Z,{sx:{top:6,right:6,position:"absolute"},children:(0,M.jsx)(_.V3,{size:"small",onClick:function(){return function(e){var n=t.filter((function(n){return n!==e}));i(n)}(e)},sx:{p:"2px",color:"common.white",bgcolor:function(e){return(0,he.Fq)(e.palette.grey[900],.72)},"&:hover":{bgcolor:function(e){return(0,he.Fq)(e.palette.grey[900],.48)}}},children:(0,M.jsx)(y.JO,{icon:ue.Z})})})]}),o)})),(0,M.jsxs)(me,(0,r.Z)((0,r.Z)({},a()),{},{sx:(0,r.Z)({},l&&{opacity:.72}),children:[(0,M.jsx)("input",(0,r.Z)({},c())),(0,M.jsx)(z.Z,{component:y.JO,icon:b.Z,sx:{color:"text.secondary"}})]}))]})}function ge(e){var n=e.attachments,t=(0,u.useState)(!1),i=(0,w.Z)(t,2),r=i[0],s=i[1],o=(0,u.useState)(null),a=(0,w.Z)(o,2),c=a[0],l=a[1],d=n;return(0,M.jsxs)(M.Fragment,{children:[n.map((function(e){return(0,M.jsx)(z.Z,{component:"img",src:e,onClick:function(){return function(e){var n=(0,H.findIndex)(d,(function(n){return n===e}));s(!0),l(n)}(e)},sx:{width:64,height:64,objectFit:"cover",cursor:"pointer",borderRadius:1,m:.5}},e)})),(0,M.jsx)(fe,{}),(0,M.jsx)(Ze.Z,{images:d,photoIndex:c,setPhotoIndex:l,isOpen:r,onClose:function(){s(!1)}})]})}var je=t(63772),ve=t(74418);function we(){return(0,M.jsxs)(l.Z,{direction:"row",spacing:2,sx:{py:3,px:2.5},children:[(0,M.jsx)(ve.Z,{}),(0,M.jsxs)(k.Z,{variant:"outlined",sx:{p:1,flexGrow:1},children:[(0,M.jsx)(P.Z,{fullWidth:!0,multiline:!0,placeholder:"\u952e\u5165\u6d88\u606f",sx:{"& fieldset":{display:"none"}}}),(0,M.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,M.jsxs)(l.Z,{direction:"row",spacing:.5,children:[(0,M.jsx)(E.Z,{title:"\u6dfb\u52a0\u7167\u7247",children:(0,M.jsx)(_.V3,{size:"small",children:(0,M.jsx)(y.JO,{icon:je.Z,width:20,height:20})})}),(0,M.jsx)(E.Z,{title:"\u9644\u4ef6",children:(0,M.jsx)(_.V3,{size:"small",children:(0,M.jsx)(y.JO,{icon:te.Z,width:20,height:20})})})]}),(0,M.jsx)(C.Z,{variant:"contained",children:"\u8bc4\u8bba"})]})]})]})}var be=t(58216);function ye(e){var n=e.comments,t=(0,u.useState)(!1),i=(0,w.Z)(t,2),r=i[0],s=i[1],o=(0,u.useState)(null),a=(0,w.Z)(o,2),c=a[0],d=a[1],h=n.filter((function(e){return"image"===e.messageType})).map((function(e){return e.message}));return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(l.Z,{spacing:3,sx:{py:3,px:2.5,bgcolor:"background.neutral"},children:n.map((function(e){return(0,M.jsxs)(l.Z,{direction:"row",spacing:2,children:[(0,M.jsx)(ae.Z,{src:e.avatar,sx:{width:32,height:32}}),(0,M.jsxs)("div",{children:[(0,M.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,M.jsxs)(T.Z,{variant:"subtitle2",children:[" ",e.name]}),(0,M.jsx)(T.Z,{variant:"caption",sx:{color:"text.secondary"},children:(0,be.DY)(e.createdAt)})]}),"image"===e.messageType?(0,M.jsx)(z.Z,{component:"img",src:e.message,onClick:function(){return function(e){var n=(0,H.findIndex)(h,(function(n){return n===e}));s(!0),d(n)}(e.message)},sx:{mt:2,borderRadius:1}}):(0,M.jsx)(T.Z,{variant:"body2",sx:{mt:.5},children:e.message})]})]},e.id)}))}),(0,M.jsx)(Ze.Z,{images:h,photoIndex:c,setPhotoIndex:d,isOpen:r,onClose:function(){return s(!1)}})]})}var ke=["low","medium","hight"],Ce=(0,le.ZP)(T.Z)((function(e){var n=e.theme;return(0,r.Z)((0,r.Z)({},n.typography.body2),{},{width:140,fontSize:13,flexShrink:0,color:n.palette.text.secondary})}));function Ie(e){var n=e.card,t=e.isOpen,i=e.onClose,s=e.onDeleteTask,o=(0,u.useRef)(null),a=(0,u.useState)(n.completed),c=(0,w.Z)(a,2),d=c[0],h=c[1],x=(0,u.useState)("low"),p=(0,w.Z)(x,2),Z=p[0],m=p[1],f=n.name,g=n.description,j=n.due,v=n.assignee,k=n.attachments,I=n.comments,S=Q({date:j}),J=S.dueDate,F=S.startTime,W=S.endTime,A=S.isSameDays,V=S.isSameMonths,B=S.onChangeDueDate,U=S.openPicker,G=S.onOpenPicker,L=S.onClosePicker;return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)(se.ZP,{open:t,onClose:i,anchor:"right",PaperProps:{sx:{width:{xs:1,sm:480}}},children:[(0,M.jsxs)(l.Z,{p:2.5,direction:"row",alignItems:"center",children:[(0,M.jsx)(_.Jh,{width:"smUp",children:(0,M.jsx)(E.Z,{title:"\u8fd4\u56de",children:(0,M.jsx)(_.V3,{onClick:i,sx:{mr:1},children:(0,M.jsx)(y.JO,{icon:ne.Z,width:20,height:20})})})}),(0,M.jsx)(C.Z,{size:"small",variant:"outlined",color:d?"primary":"inherit",startIcon:!d&&(0,M.jsx)(y.JO,{icon:ie.Z,width:16,height:16}),onClick:function(){h((function(e){return!e}))},children:d?"\u5b8c\u6210":"\u6807\u8bb0\u5b8c\u6210"}),(0,M.jsxs)(l.Z,{direction:"row",spacing:1,justifyContent:"flex-end",flexGrow:1,children:[(0,M.jsx)(E.Z,{title:"\u50cf\u8fd9\u6837",children:(0,M.jsx)(_.V3,{size:"small",children:(0,M.jsx)(y.JO,{icon:re.Z,width:20,height:20})})}),(0,M.jsx)(E.Z,{title:"\u9644\u4ef6",children:(0,M.jsx)(_.V3,{size:"small",onClick:function(){o.current.click()},children:(0,M.jsx)(y.JO,{icon:te.Z,width:20,height:20})})}),(0,M.jsx)("input",{ref:o,type:"file",style:{display:"none"}}),(0,M.jsx)(E.Z,{title:"\u5220\u9664\u4efb\u52a1",children:(0,M.jsx)(_.V3,{onClick:s,size:"small",children:(0,M.jsx)(y.JO,{icon:D.Z,width:20,height:20})})}),(0,M.jsx)(E.Z,{title:"\u66f4\u591a\u64cd\u4f5c",children:(0,M.jsx)(_.V3,{size:"small",children:(0,M.jsx)(y.JO,{icon:O.Z,width:20,height:20})})})]})]}),(0,M.jsx)(oe.Z,{}),(0,M.jsxs)(de.Z,{children:[(0,M.jsxs)(l.Z,{spacing:3,sx:{px:2.5,py:3},children:[(0,M.jsx)(P.Z,{fullWidth:!0,multiline:!0,size:"small",placeholder:"\u4efb\u52a1\u540d\u79f0",value:f,sx:{typography:"h6","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}}}),(0,M.jsxs)(l.Z,{direction:"row",children:[(0,M.jsx)(Ce,{sx:{mt:1.5},children:"\u53d7\u8ba9\u4eba"}),(0,M.jsxs)(l.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",children:[v.map((function(e){return(0,M.jsx)(ae.Z,{alt:e.name,src:e.avatar,sx:{m:.5,width:36,height:36}},e.id)})),(0,M.jsx)(E.Z,{title:"\u6dfb\u52a0\u53d7\u8ba9\u4eba",children:(0,M.jsx)(_.V3,{sx:{p:1,ml:.5,border:function(e){return"dashed 1px ".concat(e.palette.divider)}},children:(0,M.jsx)(y.JO,{icon:b.Z,width:20,height:20})})})]})]}),(0,M.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,M.jsx)(Ce,{children:"\u5230\u671f\u65e5"}),(0,M.jsxs)(M.Fragment,{children:[F&&W?(0,M.jsx)(X,{startTime:F,endTime:W,isSameDays:A,isSameMonths:V,onOpenPicker:G,sx:{typography:"body2"}}):(0,M.jsx)(E.Z,{title:"\u6dfb\u52a0\u53d7\u8ba9\u4eba",children:(0,M.jsx)(_.V3,{onClick:G,sx:{p:1,ml:.5,border:function(e){return"dashed 1px ".concat(e.palette.divider)}},children:(0,M.jsx)(y.JO,{icon:b.Z,width:20,height:20})})}),(0,M.jsx)(q.Z,{open:U,onClose:L,onOpen:G,value:J,onChange:B,renderInput:function(){}})]})]}),(0,M.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,M.jsx)(Ce,{children:"\u6309\u91cd\u8981\u6027\u6392\u5217"}),(0,M.jsx)(ce.Z,{fullWidth:!0,select:!0,size:"small",value:Z,onChange:function(e){m(e.target.value)},sx:{"& svg":{display:"none"},"& fieldset":{display:"none"},"& .MuiSelect-select":{p:0,display:"flex",alignItems:"center"}},children:ke.map((function(e){return(0,M.jsxs)(R.Z,{value:e,children:[(0,M.jsx)(z.Z,{sx:(0,r.Z)((0,r.Z)({mr:1,width:14,height:14,borderRadius:.5,bgcolor:"error.main"},"low"===e&&{bgcolor:"info.main"}),"medium"===e&&{bgcolor:"warning.main"})}),(0,M.jsx)(T.Z,{variant:"body2",sx:{textTransform:"capitalize"},children:e})]},e)}))})]}),(0,M.jsxs)(l.Z,{direction:"row",children:[(0,M.jsx)(Ce,{sx:{mt:2},children:"\u63cf\u8ff0"}),(0,M.jsx)(P.Z,{fullWidth:!0,multiline:!0,rows:3,size:"small",placeholder:"Task name",value:g,sx:{typography:"body2"}})]}),(0,M.jsxs)(l.Z,{direction:"row",children:[(0,M.jsx)(Ce,{sx:{mt:2},children:"\u9644\u4ef6"}),(0,M.jsx)(l.Z,{direction:"row",flexWrap:"wrap",children:(0,M.jsx)(ge,{attachments:k})})]})]}),I.length>0&&(0,M.jsx)(ye,{comments:I})]}),(0,M.jsx)(oe.Z,{}),(0,M.jsx)(we,{})]})})}function Se(e){var n=e.card,t=e.onDeleteTask,i=e.index,s=n.name,o=n.attachments,a=(0,u.useState)(!1),c=(0,w.Z)(a,2),l=c[0],d=c[1],x=(0,u.useState)(n.completed),p=(0,w.Z)(x,2),Z=p[0],m=p[1],f=function(){d(!0)},g=function(){d(!1)},j=function(e){m(e.target.checked)};return(0,M.jsx)(h._l,{draggableId:n.id,index:i,children:function(e){return(0,M.jsxs)("div",(0,r.Z)((0,r.Z)((0,r.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,M.jsxs)(k.Z,{sx:(0,r.Z)({px:2,width:1,position:"relative",boxShadow:function(e){return e.customShadows.z1},"&:hover":{boxShadow:function(e){return e.customShadows.z16}}},o.length>0&&{pt:2}),children:[(0,M.jsxs)(z.Z,{onClick:f,sx:{cursor:"pointer"},children:[o.length>0&&(0,M.jsx)(z.Z,{sx:(0,r.Z)({pt:"60%",borderRadius:1,overflow:"hidden",position:"relative",transition:function(e){return e.transitions.create("opacity",{duration:e.transitions.duration.shortest})}},Z&&{opacity:.48}),children:(0,M.jsx)(z.Z,{component:"img",src:o[0],sx:{position:"absolute",top:0,width:1,height:1}})}),(0,M.jsx)(T.Z,{noWrap:!0,variant:"subtitle2",sx:(0,r.Z)({py:3,pl:5,transition:function(e){return e.transitions.create("opacity",{duration:e.transitions.duration.shortest})}},Z&&{opacity:.48}),children:s})]}),(0,M.jsx)(G.Z,{disableRipple:!0,checked:Z,icon:(0,M.jsx)(y.JO,{icon:B.Z}),checkedIcon:(0,M.jsx)(y.JO,{icon:A.Z}),onChange:j,sx:{position:"absolute",bottom:15}})]}),(0,M.jsx)(Ie,{card:n,isOpen:l,onClose:g,onDeleteTask:function(){return t(n.id)}})]}))}})}function Oe(e){var n=e.column,t=e.index,i=(0,f.I0)(),s=(0,d.Ds)().enqueueSnackbar,o=(0,I.v9)((function(e){return e.kanban})).board,a=(0,u.useState)(!1),c=(0,w.Z)(a,2),x=c[0],p=c[1],Z=n.name,g=n.cardIds,S=n.id,O=function(){p((function(e){return!e}))},D=function(){p(!1)},P=function(e){i((0,m._5)({cardId:e,columnId:S})),s("Delete success",{variant:"success"})},R=function(){var e=(0,v.Z)((0,j.Z)().mark((function e(t){return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t!==Z&&(i((0,m.Gw)(S,(0,r.Z)((0,r.Z)({},n),{},{name:t}))),s("Update success",{variant:"success"}))}catch(o){console.error(o)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,v.Z)((0,j.Z)().mark((function e(){return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i((0,m.eA)(S)),s("Delete success",{variant:"success"})}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){i((0,m.gI)({card:e,columnId:S})),s("Add success",{variant:"success"}),D()};return(0,M.jsx)(h._l,{draggableId:S,index:t,children:function(e){return(0,M.jsx)(k.Z,(0,r.Z)((0,r.Z)({},e.draggableProps),{},{ref:e.innerRef,variant:"outlined",sx:{px:2,bgcolor:"grey.5008"},children:(0,M.jsxs)(l.Z,(0,r.Z)((0,r.Z)({spacing:3},e.dragHandleProps),{},{children:[(0,M.jsx)(F,{columnId:S,columnName:Z,onDelete:z,onUpdate:R}),(0,M.jsx)(h.bK,{droppableId:S,type:"task",children:function(e){return(0,M.jsxs)(l.Z,(0,r.Z)((0,r.Z)({ref:e.innerRef},e.droppableProps),{},{spacing:2,width:280,children:[g.map((function(e,n){var t=null===o||void 0===o?void 0:o.cards[e];return(0,M.jsx)(Se,{onDeleteTask:P,card:t,index:n},e)})),e.placeholder]}))}}),(0,M.jsxs)(l.Z,{spacing:2,sx:{pb:3},children:[x&&(0,M.jsx)(ee,{onAddTask:T,onCloseAddTask:D}),(0,M.jsx)(C.Z,{fullWidth:!0,size:"large",color:"inherit",startIcon:(0,M.jsx)(y.JO,{icon:b.Z,width:20,height:20}),onClick:O,sx:{fontSize:14},children:"\u6dfb\u52a0\u4efb\u52a1"})]})]}))}))}})}function De(){var e=(0,u.useRef)(null),n=(0,f.I0)(),t=(0,d.Ds)().enqueueSnackbar,i=(0,u.useState)(""),r=(0,w.Z)(i,2),s=r[0],o=r[1],a=(0,u.useState)(!1),c=(0,w.Z)(a,2),l=c[0],h=c[1];(0,u.useEffect)((function(){l&&null!==e&&e.current.focus()}),[l]);var x=function(){var e=(0,v.Z)((0,j.Z)().mark((function e(){return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s&&(n((0,m.wy)({name:s})),t("\u521b\u5efa\u6210\u529f",{variant:"success"}),o("")),h(!1)}catch(i){console.error(i)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,M.jsxs)(k.Z,{sx:{minWidth:280,width:280},children:[!l&&(0,M.jsx)(C.Z,{fullWidth:!0,size:"large",color:"inherit",variant:"outlined",startIcon:(0,M.jsx)(y.JO,{icon:b.Z,width:20,height:20}),onClick:function(){h(!0)},children:"\u6dfb\u52a0\u8282\u70b9"}),l&&(0,M.jsx)(U.Z,{onClickAway:x,children:(0,M.jsx)(P.Z,{fullWidth:!0,placeholder:"New section",inputRef:e,value:s,onChange:function(e){o(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&x()},sx:{typography:"h6"}})})]})}var Pe=(0,M.jsx)(M.Fragment,{children:(0,s.Z)(Array(3)).map((function(e,n){return(0,M.jsx)(o.ZP,{item:!0,xs:12,md:3,children:(0,M.jsx)(a.Z,{variant:"rectangular",width:"100%",sx:{paddingTop:"115%",borderRadius:2}})},n)}))});function Re(){var e=(0,f.I0)(),n=(0,d.Ds)().enqueueSnackbar,t=(0,f.v9)((function(e){return e.kanban})).board;(0,u.useEffect)((function(){e((0,m.SZ)())}),[e]);return(0,M.jsx)(p.Z,{title:"\u770b\u7248 ".concat(Z.cb),sx:{height:"100%"},children:(0,M.jsxs)(c.Z,{maxWidth:!1,sx:{height:"100%"},children:[(0,M.jsx)(x.Z,{heading:"\u770b\u7248",links:[{name:"APP",href:g.vB.root},{name:"\u770b\u7248"}]}),(0,M.jsx)(h.Z5,{onDragEnd:function(o){var a,c=o.destination,l=o.source,d=o.draggableId,u=o.type;if(c&&(c.droppableId!==l.droppableId||c.index!==l.index)){if("column"===u){var h=Array.from(t.columnOrder);return h.splice(l.index,1),h.splice(c.index,0,d),e((0,m.Rc)(h)),void n("\u66f4\u65b0\u6210\u529f",{variant:"success"})}var x=t.columns[l.droppableId],p=t.columns[c.droppableId];if(x.id!==p.id){var Z=(0,s.Z)(x.cardIds);Z.splice(l.index,1);var f=(0,r.Z)((0,r.Z)({},x),{},{cardIds:Z}),g=(0,s.Z)(p.cardIds);g.splice(c.index,0,d);var j=(0,r.Z)((0,r.Z)({},p),{},{cardIds:g});e((0,m.B)({columns:(0,r.Z)((0,r.Z)({},t.columns),{},(a={},(0,i.Z)(a,f.id,f),(0,i.Z)(a,j.id,j),a))})),n("Update success",{variant:"success"})}else{var v=(0,s.Z)(x.cardIds);v.splice(l.index,1),v.splice(c.index,0,d);var w=(0,r.Z)((0,r.Z)({},x),{},{cardIds:v});e((0,m.B)({columns:(0,r.Z)((0,r.Z)({},t.columns),{},(0,i.Z)({},w.id,w))}))}}},children:(0,M.jsx)(h.bK,{droppableId:"all-columns",direction:"horizontal",type:"column",children:function(e){var n;return(0,M.jsxs)(l.Z,(0,r.Z)((0,r.Z)({},e.droppableProps),{},{ref:e.innerRef,direction:"row",alignItems:"flex-start",spacing:3,sx:{height:"calc(100% - 32px)",overflowY:"hidden"},children:[null===t||void 0===t||null===(n=t.columnOrder)||void 0===n?void 0:n.map((function(e,n){var i=t.columns[e];return(0,M.jsx)(Oe,{index:n,column:i},e)})),!(null!==t&&void 0!==t&&t.columnOrder.length)&&Pe,e.placeholder,(0,M.jsx)(De,{})]}))}})})]})})}}}]);
//# sourceMappingURL=8573.7e5817e7.chunk.js.map